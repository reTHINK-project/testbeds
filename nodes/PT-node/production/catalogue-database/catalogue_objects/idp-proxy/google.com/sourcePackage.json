{
  "sourceCode": "KGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCWRlZmluZSgiYWN0aXZhdGUiLCBbXSwgZmFjdG9yeSk7CgllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykKCQlleHBvcnRzWyJhY3RpdmF0ZSJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbImFjdGl2YXRlIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewoKLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7CgovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlleHBvcnRzOiB7fSwKLyoqKioqKi8gCQkJaWQ6IG1vZHVsZUlkLAovKioqKioqLyAJCQlsb2FkZWQ6IGZhbHNlCi8qKioqKiovIAkJfTsKCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7CgovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKLyoqKioqKi8gCQltb2R1bGUubG9hZGVkID0gdHJ1ZTsKCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7Ci8qKioqKiovIAl9CgoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwoKLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCglleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCglmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCgl2YXIgaWRlbnRpdGllcyA9IHt9OwoJdmFyIG5JZGVudGl0eSA9IDA7CgoJLyoNCgkJU28gdGhhdCBhbiBhcHBsaWNhdGlvbiBjYW4gdXNlIEdvb2dsZSdzIE9BdXRoIDIuMCBhdXRoZW50aWNhdGlvbiBzeXN0ZW0gZm9yIHVzZXIgbG9naW4sDQoJCWZpcnN0IGlzIHJlcXVpcmVkIHRvIHNldCB1cCBhIHByb2plY3QgaW4gdGhlIEdvb2dsZSBEZXZlbG9wZXJzIENvbnNvbGUgdG8gb2J0YWluIE9BdXRoIDIuMCBjcmVkZW50aWFscyBhbmQgc2V0IGEgcmVkaXJlY3QgVVJJLg0KCQlBIHRlc3QgYWNjb3VudCB3YXMgY3JlYXRlZCB0byBzZXQgdGhlIHByb2plY3QgaW4gdGhlIEdvb2dsZSBEZXZlbG9wZXJzIENvbnNvbGUgdG8gb2J0YWluIE9BdXRoIDIuMCBjcmVkZW50aWFscywJd2l0aCB0aGUgZm9sbG93aW5nIGNyZWRlbnRpYWxzOg0KCSAgICAgIAl1c2VybmFtZTogb3BlbmlkdGVzdDEwQGdtYWlsLmNvbQ0KCSAgICAgICAgcGFzc3dvcmQ6IHRlc3RPcGVuSUQxMA0KCQlUbyBhZGQgbW9yZSBVUkkncywgZm9sbG93IHRoZSBzdGVwczoNCgkJMcK6IGNob29zZSB0aGUgcHJvamVjdCAoIGNhbiBiZSB0aGUgTXkgT3BlbklEIFByb2plY3QpCSBmcm9tICBodHRwczovL2NvbnNvbGUuZGV2ZWxvcGVycy5nb29nbGUuY29tL3Byb2plY3RzZWxlY3Rvci9hcGlzL2NyZWRlbnRpYWxzIHVzaW5nIHRoZSBjcmVkZW50aWFscyBwcm92aWRlZCBhYm92ZS4NCgkJMsK6IE9wZW4gVGhlIENsaWVudCBXZWIgMSBsaXN0ZWQgaW4gT0F1dGggMi4wIENsaWVudCBJRCdzDQoJCTPCuiBBZGQgdGhlIFVSSSAgaW4gdGhlIGF1dGhvcml6ZWQgcmVkaXJlY3QgVVJJIHNlY3Rpb24uDQoJICA0wrogY2hhbmdlIHRoZSBSRURJUkVDVCBwYXJhbWV0ZXIgYmVsbG93IHdpdGggdGhlIHByZXRlbmRlZCBVUkkNCgkgKi8KCgl2YXIgZ29vZ2xlSW5mbyA9IHsKCSAgY2xpZW50U2VjcmV0OiAnWHg0ckt1Y2I1WllUYVhsY1pYOUhMZlpXJywKCSAgY2xpZW50SUQ6ICc4MDgzMjk1NjYwMTItdHFyOHFvaDExMTk0MmdkMmtnMDA3dDBzOGYyNzdyb2kuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nLAoJICByZWRpcmVjdFVSSTogbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdG5hbWUsIC8vbG9jYXRpb24ub3JpZ2luLAoJICBpc3N1ZXI6ICdodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20nLAoJICB0b2tlbkVuZHBvaW50OiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3Y0L3Rva2VuPycsCgkgIGp3a3NVcmk6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvY2VydHM/JywKCSAgYXV0aG9yaXNhdGlvbkVuZHBvaW50OiAnaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGg/JywKCSAgdXNlcmluZm86ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdXNlcmluZm8/YWNjZXNzX3Rva2VuPScsCgkgIHRva2VuSW5mbzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My90b2tlbmluZm8/aWRfdG9rZW49JywKCSAgYWNjZXNzVHlwZTogJ29mZmxpbmUnLAoJICB0eXBlOiAnY29kZSB0b2tlbiBpZF90b2tlbicsCgkgIHNjb3BlOiAnb3BlbmlkJTIwZW1haWwlMjBwcm9maWxlJywKCSAgc3RhdGU6ICdzdGF0ZScKCX07CgoJLy9mdW5jdGlvbiB0byBwYXJzZSB0aGUgcXVlcnkgc3RyaW5nIGluIHRoZSBnaXZlbiBVUkwgdG8gb2JhdGluIGNlcnRhaW4gdmFsdWVzCglmdW5jdGlvbiB1cmxQYXJzZXIodXJsLCBuYW1lKSB7CgkgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcW10vLCAnXFxcWycpLnJlcGxhY2UoL1tcXV0vLCAnXFxcXScpOwoJICB2YXIgcmVnZXhTID0gJ1tcXCMmP10nICsgbmFtZSArICc9KFteJiNdKiknOwoJICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4Uyk7CgkgIHZhciByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpOwoJICBpZiAocmVzdWx0cyA9PT0gbnVsbCkgcmV0dXJuICcnO2Vsc2UgcmV0dXJuIHJlc3VsdHNbMV07Cgl9CgoJZnVuY3Rpb24gc2VuZEhUVFBSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7CgkgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCSAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikgewoJICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTsKCSAgfSBlbHNlIGlmICh0eXBlb2YgWERvbWFpblJlcXVlc3QgIT0gJ3VuZGVmaW5lZCcpIHsKCSAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGlmIFhEb21haW5SZXF1ZXN0LgoJICAgIC8vIFhEb21haW5SZXF1ZXN0IG9ubHkgZXhpc3RzIGluIElFLCBhbmQgaXMgSUUncyB3YXkgb2YgbWFraW5nIENPUlMgcmVxdWVzdHMuCgkgICAgeGhyID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7CgkgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpOwoJICB9IGVsc2UgewoJICAgIC8vIE90aGVyd2lzZSwgQ09SUyBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLgoJICAgIHhociA9IG51bGw7CgkgIH0KCSAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICBpZiAoeGhyKSB7CgkgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKCSAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7CgkgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkgewoJICAgICAgICAgICAgdmFyIGluZm8gPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpOwoJICAgICAgICAgICAgcmVzb2x2ZShpbmZvKTsKCSAgICAgICAgICB9IGVsc2UgaWYgKHhoci5zdGF0dXMgPT09IDQwMCkgewoJICAgICAgICAgICAgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdG9rZW4nKTsKCSAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgcmVqZWN0KCdzb21ldGhpbmcgZWxzZSBvdGhlciB0aGFuIDIwMCB3YXMgcmV0dXJuZWQnKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH07CgkgICAgICB4aHIuc2VuZCgpOwoJICAgIH0gZWxzZSB7CgkgICAgICByZWplY3QoJ0NPUlMgbm90IHN1cHBvcnRlZCcpOwoJICAgIH0KCSAgfSk7Cgl9CgoJLyoqDQoJKiBGdW5jdGlvbiB0byBleGNoYW5nZSB0aGUgY29kZSByZWNlaXZlZCB0byB0aGUgaWQgVG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgYSByZWZyZXNoIHRva2VuDQoJKg0KCSovCgl2YXIgZXhjaGFuZ2VDb2RlID0gZnVuY3Rpb24gZXhjaGFuZ2VDb2RlKGNvZGUpIHsKCSAgdmFyIGkgPSBnb29nbGVJbmZvOwoKCSAgdmFyIFVSTCA9IGkudG9rZW5FbmRwb2ludCArICdjb2RlPScgKyBjb2RlICsgJyZjbGllbnRfaWQ9JyArIGkuY2xpZW50SUQgKyAnJmNsaWVudF9zZWNyZXQ9JyArIGkuY2xpZW50U2VjcmV0ICsgJyZyZWRpcmVjdF91cmk9JyArIGkucmVkaXJlY3RVUkkgKyAnJmdyYW50X3R5cGU9YXV0aG9yaXphdGlvbl9jb2RlJzsKCgkgIC8vbGV0IFVSTCA9ID0gaS50b2tlbkVuZHBvaW50ICsgJ2NsaWVudF9pZD0nICsgaS5jbGllbnRJRCArICcmY2xpZW50X3NlY3JldD0nICsgaS5jbGllbnRTZWNyZXQgKyAnJnJlZnJlc2hfdG9rZW49JyArIGNvZGUgKyAnJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlbic7CgoJICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoJICAgIHNlbmRIVFRQUmVxdWVzdCgnUE9TVCcsIFVSTCkudGhlbihmdW5jdGlvbiAoaW5mbykgewoJICAgICAgcmVzb2x2ZShpbmZvKTsKCSAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKCSAgICAgIHJlamVjdChlcnJvcik7CgkgICAgfSk7CgkgIH0pOwoJfTsKCgkvKioNCgkqIElkZW50aXR5IFByb3ZpZGVyIFByb3h5DQoJKi8KCXZhciBJZHBQcm94eSA9IHsKCgkgIC8qKg0KCSAgKiBGdW5jdGlvbiB0byB2YWxpZGF0ZSBhbiBpZGVudGl0eSBBc3NlcnRpb24gcmVjZWl2ZWQNCgkgICogVE9ETyBhZGQgZGV0YWlscyBvZiB0aGUgaW1wbGVtZW50YXRpb24sIGFuZCBpbXByb3ZlIHRoZSBpbXBsZW1lbnRhdGlvbg0KCSAgKg0KCSAgKiBAcGFyYW0gIHthc3NlcnRpb259ICAgIElkZW50aXR5IEFzc2VydGlvbiB0byBiZSB2YWxpZGF0ZWQNCgkgICogQHBhcmFtICB7b3JpZ2lufSAgICAgICBPcmlnaW4gcGFyYW1ldGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgb3JpZ2luIG9mIHRoZSBSVENQZWVyQ29ubmVjdGlvbg0KCSAgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIGlkZW50aXR5IGFzc2VydGlvbiB2YWxpZGF0aW9uIHJlc3VsdA0KCSAgKi8KCSAgdmFsaWRhdGVBc3NlcnRpb246IGZ1bmN0aW9uIHZhbGlkYXRlQXNzZXJ0aW9uKGFzc2VydGlvbiwgb3JpZ2luKSB7CgoJICAgIC8vVE9ETyBjaGVjayB0aGUgdmFsdWVzIHdpdGggdGhlIGhhc2ggcmVjZWl2ZWQKCSAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKCSAgICAgIHZhciBkZWNvZGVkQ29udGVudCA9IGF0b2IoYXNzZXJ0aW9uKTsKCSAgICAgIHZhciBjb250ZW50ID0gSlNPTi5wYXJzZShkZWNvZGVkQ29udGVudCk7CgoJICAgICAgdmFyIGlkVG9rZW5TcGxpdGVkID0gY29udGVudC50b2tlbklELnNwbGl0KCcuJyk7CgoJICAgICAgdmFyIGlkVG9rZW4gPSBKU09OLnBhcnNlKGF0b2IoaWRUb2tlblNwbGl0ZWRbMV0pKTsKCgkgICAgICByZXNvbHZlKHsgaWRlbnRpdHk6IGlkVG9rZW4uZW1haWwsIGNvbnRlbnRzOiBpZFRva2VuLm5vbmNlIH0pOwoJICAgIH0pOwoJICAgIC8qcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KSB7DQoJICAgICAgbGV0IGkgPSBnb29nbGVJbmZvOw0KCSAgICAgICAgbGV0IGRlY29kZWRDb250ZW50ID0gYXRvYihhc3NlcnRpb24pOw0KCSAgICAgIGxldCBjb250ZW50ID0gSlNPTi5wYXJzZShkZWNvZGVkQ29udGVudCk7DQoJICAgICAgc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBpLnRva2VuSW5mbyArIGNvbnRlbnQudG9rZW5JRCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHsNCgkgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkgPT09IEpTT04uc3RyaW5naWZ5KGNvbnRlbnQudG9rZW5JREpTT04pKSB7DQoJICAgICAgICAgIHJlc29sdmUoe2lkZW50aXR5OiBjb250ZW50LnRva2VuSURKU09OLmVtYWlsLCBjb250ZW50czogY29udGVudC50b2tlbklESlNPTn0pOw0KCSAgICAgICAgfSBlbHNlIHsNCgkgICAgICAgICAgcmVqZWN0KCdpbnZhbGlkJyk7DQoJICAgICAgICB9DQoJICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7DQoJICAgICAgICAgIHJlamVjdChlcnIpOw0KCSAgICAgIH0pOw0KCSAgICB9KTsqLwoJICB9LAoKCSAgLyoqDQoJICAqIEZ1bmN0aW9uIHRvIGdlbmVyYXRlIGFuIGlkZW50aXR5IEFzc2VydGlvbg0KCSAgKiBUT0RPIGFkZCBkZXRhaWxzIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiwgYW5kIGltcHJvdmUgaW1wbGVtZW50YXRpb24NCgkgICoNCgkgICogQHBhcmFtICB7Y29udGVudHN9IFRoZSBjb250ZW50cyBpbmNsdWRlcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaWRlbnRpdHkgcmVjZWl2ZWQNCgkgICogQHBhcmFtICB7b3JpZ2lufSBPcmlnaW4gcGFyYW1ldGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgb3JpZ2luIG9mIHRoZSBSVENQZWVyQ29ubmVjdGlvbg0KCSAgKiBAcGFyYW0gIHt1c2VybmFtZUhpbnR9IG9wdGlvbmFsIHVzZXJuYW1lSGludCBwYXJhbWV0ZXINCgkgICogQHJldHVybiB7UHJvbWlzZX0gcmV0dXJucyBhIHByb21pc2Ugd2l0aCBhbiBpZGVudGl0eSBhc3NlcnRpb24NCgkgICovCgkgIGdlbmVyYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cywgb3JpZ2luLCBoaW50KSB7CgkgICAgdmFyIGkgPSBnb29nbGVJbmZvOwoKCSAgICAvL3N0YXJ0IHRoZSBsb2dpbiBwaGFzZQoJICAgIC8vVE9ETyBsYXRlciBzaG91bGQgYmUgZGVmaW5lZCBhIGJldHRlciBhcHByb2FjaAoJICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgICBpZiAoIWhpbnQpIHsKCSAgICAgICAgLyp0cnkgew0KCSAgICAgICAgICBpZiAod2luZG93KSB7DQoJICAgICAgICAgICAgcmVzb2x2ZSgndXJsJyk7DQoJICAgICAgICAgIH0NCgkgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7Ki8KCgkgICAgICAgIHZhciByZXF1ZXN0VXJsID0gaS5hdXRob3Jpc2F0aW9uRW5kcG9pbnQgKyAnc2NvcGU9JyArIGkuc2NvcGUgKyAnJmNsaWVudF9pZD0nICsgaS5jbGllbnRJRCArICcmcmVkaXJlY3RfdXJpPScgKyBpLnJlZGlyZWN0VVJJICsgJyZyZXNwb25zZV90eXBlPScgKyBpLnR5cGUgKyAnJnN0YXRlPScgKyBpLnN0YXRlICsgJyZhY2Nlc3NfdHlwZT0nICsgaS5hY2Nlc3NUeXBlICsgJyZub25jZT0nICsgY29udGVudHM7CgoJICAgICAgICByZWplY3QoeyBuYW1lOiAnSWRQTG9naW5FcnJvcicsIGxvZ2luVXJsOiByZXF1ZXN0VXJsIH0pOwoKCSAgICAgICAgLy8gIH0KCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIC8vIHRoZSByZXF1ZXN0IGhhdmUgYWxyZWFkeSBiZWVuIG1hZGUsIHNvIGlkcFBSb3h5IHdpbGwgZXhjaGFuZ2UgdGhlIHRva2VucyBhbG9uZyB0byB0aGUgaWRwLCB0byBvYnRhaW4gdGhlIGluZm9ybWF0aW9uIG5lY2Vzc2FyeQoJICAgICAgICB2YXIgYWNjZXNzVG9rZW4gPSB1cmxQYXJzZXIoaGludCwgJ2FjY2Vzc190b2tlbicpOwoJICAgICAgICB2YXIgaWRUb2tlbiA9IHVybFBhcnNlcihoaW50LCAnaWRfdG9rZW4nKTsKCSAgICAgICAgdmFyIGNvZGUgPSB1cmxQYXJzZXIoaGludCwgJ2NvZGUnKTsKCgkgICAgICAgIGV4Y2hhbmdlQ29kZShjb2RlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewoKCSAgICAgICAgICAvL29idGFpbiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlcgoJICAgICAgICAgIHZhciBpbmZvVG9rZW5VUkwgPSBpLnVzZXJpbmZvICsgdmFsdWUuYWNjZXNzX3Rva2VuOwoJICAgICAgICAgIHNlbmRIVFRQUmVxdWVzdCgnR0VUJywgaW5mb1Rva2VuVVJMKS50aGVuKGZ1bmN0aW9uIChpbmZvVG9rZW4pIHsKCgkgICAgICAgICAgICB2YXIgaWRlbnRpdHlCdW5kbGUgPSB7IGFjY2Vzc1Rva2VuOiB2YWx1ZS5hY2Nlc3NfdG9rZW4sIGlkVG9rZW46IHZhbHVlLmlkX3Rva2VuLCByZWZyZXNoVG9rZW46IHZhbHVlLnJlZnJlc2hfdG9rZW4sIHRva2VuVHlwZTogdmFsdWUudG9rZW5fdHlwZSwgaW5mb1Rva2VuOiBpbmZvVG9rZW4gfTsKCgkgICAgICAgICAgICB2YXIgaWRUb2tlblVSTCA9IGkudG9rZW5JbmZvICsgdmFsdWUuaWRfdG9rZW47CgoJICAgICAgICAgICAgLy9vYnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIgaWRUb2tlbgoJICAgICAgICAgICAgc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBpZFRva2VuVVJMKS50aGVuKGZ1bmN0aW9uIChpZFRva2VuKSB7CgoJICAgICAgICAgICAgICBpZGVudGl0eUJ1bmRsZS50b2tlbklESlNPTiA9IGlkVG9rZW47CgkgICAgICAgICAgICAgIGlkZW50aXR5QnVuZGxlLmV4cGlyZXMgPSBpZFRva2VuLmV4cDsKCSAgICAgICAgICAgICAgaWRlbnRpdHlCdW5kbGUuZW1haWwgPSBpZFRva2VuLmVtYWlsOwoKCSAgICAgICAgICAgICAgdmFyIGFzc2VydGlvbiA9IGJ0b2EoSlNPTi5zdHJpbmdpZnkoeyB0b2tlbklEOiB2YWx1ZS5pZF90b2tlbiwgdG9rZW5JREpTT046IGlkVG9rZW4gfSkpOwoJICAgICAgICAgICAgICB2YXIgaWRwQnVuZGxlID0geyBkb21haW46ICdnb29nbGUuY29tJywgcHJvdG9jb2w6ICdPSURDJyB9OwoKCSAgICAgICAgICAgICAgLy9UT0RPIGRlbGV0ZSBsYXRlciB0aGUgZmllbGQgaW5mb1Rva2VuLCBhbmQgZGVsZXRlIHRoZSBuZWVkIGluIHRoZSBleGFtcGxlCgkgICAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHsgYXNzZXJ0aW9uOiBhc3NlcnRpb24sIGlkcDogaWRwQnVuZGxlLCBpbmZvOiBpZGVudGl0eUJ1bmRsZSwgaW5mb1Rva2VuOiBpbmZvVG9rZW4gfTsKCgkgICAgICAgICAgICAgIGlkZW50aXRpZXNbbklkZW50aXR5XSA9IHJldHVyblZhbHVlOwoJICAgICAgICAgICAgICArK25JZGVudGl0eTsKCgkgICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuVmFsdWUpOwoJICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHsKCgkgICAgICAgICAgICAgIHJlamVjdChlKTsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewoKCSAgICAgICAgICAgIHJlamVjdChlcnJvcik7CgkgICAgICAgICAgfSk7CgkgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKCgkgICAgICAgICAgcmVqZWN0KGVycik7CgkgICAgICAgIH0pOwoJICAgICAgfQoJICAgIH0pOwoJICB9Cgl9OwoKCS8qKg0KCSogSWRlbnRpdHkgUHJvdmlkZXIgUHJveHkgUHJvdG9jb2wgU3R1Yg0KCSovCgoJdmFyIElkcFByb3h5UHJvdG9TdHViID0gZnVuY3Rpb24gKCkgewoKCSAgLyoqDQoJICAqIENvbnN0cnVjdG9yIG9mIHRoZSBJZHBQcm94eSBTdHViDQoJICAqIFRoZSBjb25zdHJ1Y3RvciBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgbWVzc2FnZUJ1cyByZWNlaXZlZCBhbmQgc3RhcnQgYSB3ZWIgd29ya2VyIHdpdGggdGhlIGlkcFByb3h5IHJlY2VpdmVkDQoJICAqDQoJICAqIEBwYXJhbSAge1VSTC5SdW50aW1lVVJMfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMIHJ1bnRpbWVQcm90b1N1YlVSTA0KCSAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzUG9zdE1lc3NhZ2UgICAgIGNvbmZpZ3VyYXRpb24NCgkgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uDQoJICAqLwoJICBmdW5jdGlvbiBJZHBQcm94eVByb3RvU3R1YihydW50aW1lUHJvdG9TdHViVVJMLCBidXMsIGNvbmZpZykgewoJICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJZHBQcm94eVByb3RvU3R1Yik7CgoJICAgIHZhciBfdGhpcyA9IHRoaXM7CgkgICAgX3RoaXMucnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CgkgICAgX3RoaXMubWVzc2FnZUJ1cyA9IGJ1czsKCSAgICBfdGhpcy5jb25maWcgPSBjb25maWc7CgoJICAgIGNvbnNvbGUubG9nKCdbR29vZ2xlIElkcFByb3h5XSBzdGFydGluZycsIHJ1bnRpbWVQcm90b1N0dWJVUkwpOwoKCSAgICBfdGhpcy5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewoJICAgICAgaWYgKG1zZy50byA9PT0gJ2RvbWFpbi1pZHA6Ly9nb29nbGUuY29tJykgewoKCSAgICAgICAgX3RoaXMucmVxdWVzdFRvSWRwKG1zZyk7CgkgICAgICB9CgkgICAgfSk7CgkgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2NyZWF0ZWQnKTsKCSAgfQoKCSAgLyoqDQoJICAqIEZ1bmN0aW9uIHRoYXQgc2VlIHRoZSBpbnRlbmRlZCBtZXRob2QgaW4gdGhlIG1lc3NhZ2UgcmVjZWl2ZWQgYW5kIGNhbGwgdGhlIHJlc3BlY3RpdmUgZnVuY3Rpb24NCgkgICoNCgkgICogQHBhcmFtIHttZXNzYWdlfSAgbWVzc2FnZSByZWNlaXZlZCBpbiB0aGUgbWVzc2FnZUJ1cw0KCSAgKi8KCgoJICBfY3JlYXRlQ2xhc3MoSWRwUHJveHlQcm90b1N0dWIsIFt7CgkgICAga2V5OiAncmVxdWVzdFRvSWRwJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdFRvSWRwKG1zZykgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCSAgICAgIHZhciBwYXJhbXMgPSBtc2cuYm9keS5wYXJhbXM7CgoJICAgICAgc3dpdGNoIChtc2cuYm9keS5tZXRob2QpIHsKCSAgICAgICAgY2FzZSAnZ2VuZXJhdGVBc3NlcnRpb24nOgoJICAgICAgICAgIElkcFByb3h5LmdlbmVyYXRlQXNzZXJ0aW9uKHBhcmFtcy5jb250ZW50cywgcGFyYW1zLm9yaWdpbiwgcGFyYW1zLnVzZXJuYW1lSGludCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKCSAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTsKCSAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKCSAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIGVycm9yKTsKCSAgICAgICAgICB9KTsKCSAgICAgICAgICBicmVhazsKCSAgICAgICAgY2FzZSAndmFsaWRhdGVBc3NlcnRpb24nOgoJICAgICAgICAgIElkcFByb3h5LnZhbGlkYXRlQXNzZXJ0aW9uKHBhcmFtcy5hc3NlcnRpb24sIHBhcmFtcy5vcmlnaW4pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CgkgICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSk7CgkgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CgkgICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCBlcnJvcik7CgkgICAgICAgICAgfSk7CgkgICAgICAgICAgYnJlYWs7CgkgICAgICAgIGRlZmF1bHQ6CgkgICAgICAgICAgYnJlYWs7CgkgICAgICB9CgkgICAgfQoKCSAgICAvKioNCgkgICAgKiBUaGlzIGZ1bmN0aW9uIHJlY2VpdmVzIGEgbWVzc2FnZSBhbmQgYSB2YWx1ZS4gSXQgcmVwbGllcyB0aGUgdmFsdWUgdG8gdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSByZWNlaXZlZA0KCSAgICAqDQoJICAgICogQHBhcmFtICB7bWVzc2FnZX0gICBtZXNzYWdlIHJlY2VpdmVkDQoJICAgICogQHBhcmFtICB7dmFsdWV9ICAgICB2YWx1ZSB0byBpbmNsdWRlIGluIHRoZSBuZXcgbWVzc2FnZSB0byBzZW5kDQoJICAgICovCgoJICB9LCB7CgkgICAga2V5OiAncmVwbHlNZXNzYWdlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gcmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgdmFyIG1lc3NhZ2UgPSB7IGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIHRvOiBtc2cuZnJvbSwgZnJvbTogbXNnLnRvLAoJICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgdmFsdWU6IHZhbHVlIH0gfTsKCgkgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ19zZW5kU3RhdHVzJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRTdGF0dXModmFsdWUsIHJlYXNvbikgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICBjb25zb2xlLmxvZygnW0dvb2dsZUlkcFByb3h5LnNlbmRTdGF0dXNdICcsIHZhbHVlKTsKCgkgICAgICBfdGhpcy5fc3RhdGUgPSB2YWx1ZTsKCgkgICAgICB2YXIgbXNnID0gewoJICAgICAgICB0eXBlOiAndXBkYXRlJywKCSAgICAgICAgZnJvbTogX3RoaXMucnVudGltZVByb3RvU3R1YlVSTCwKCSAgICAgICAgdG86IF90aGlzLnJ1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCgkgICAgICAgIGJvZHk6IHsKCSAgICAgICAgICB2YWx1ZTogdmFsdWUKCSAgICAgICAgfQoJICAgICAgfTsKCgkgICAgICBpZiAocmVhc29uKSB7CgkgICAgICAgIG1zZy5ib2R5LmRlc2MgPSByZWFzb247CgkgICAgICB9CgoJICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwoJICAgIH0KCSAgfV0pOwoKCSAgcmV0dXJuIElkcFByb3h5UHJvdG9TdHViOwoJfSgpOwoKCS8vIGV4cG9ydCBkZWZhdWx0IElkcFByb3h5UHJvdG9TdHViOwoKCS8qKg0KCSAqIFRvIGFjdGl2YXRlIHRoaXMgcHJvdG9jb2wgc3R1YiwgdXNpbmcgdGhlIHNhbWUgbWV0aG9kIGZvciBhbGwgcHJvdG9zdHViLg0KCSAqIEBwYXJhbSAge1VSTC5SdW50aW1lVVJMfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMIHJ1bnRpbWVQcm90b1N1YlVSTA0KCSAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbg0KCSAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbg0KCSAqIEByZXR1cm4ge09iamVjdH0gT2JqZWN0IHdpdGggbmFtZSBhbmQgaW5zdGFuY2Ugb2YgUHJvdG9TdHViDQoJICovCgoKCWZ1bmN0aW9uIGFjdGl2YXRlKHVybCwgYnVzLCBjb25maWcpIHsKCSAgcmV0dXJuIHsKCSAgICBuYW1lOiAnSWRwUHJveHlQcm90b1N0dWInLAoJICAgIGluc3RhbmNlOiBuZXcgSWRwUHJveHlQcm90b1N0dWIodXJsLCBidXMsIGNvbmZpZykKCSAgfTsKCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfQovKioqKioqLyBdKQp9KTsKOw==",
  "sourceCodeClassname": "google.com",
      "encoding": "base64",
      "signature": ""
}
