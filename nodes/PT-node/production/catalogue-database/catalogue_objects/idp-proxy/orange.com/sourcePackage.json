{
  "sourceCode": "KGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCWRlZmluZSgiYWN0aXZhdGUiLCBbXSwgZmFjdG9yeSk7CgllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykKCQlleHBvcnRzWyJhY3RpdmF0ZSJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbImFjdGl2YXRlIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewoKLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7CgovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlleHBvcnRzOiB7fSwKLyoqKioqKi8gCQkJaWQ6IG1vZHVsZUlkLAovKioqKioqLyAJCQlsb2FkZWQ6IGZhbHNlCi8qKioqKiovIAkJfTsKCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7CgovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKLyoqKioqKi8gCQltb2R1bGUubG9hZGVkID0gdHJ1ZTsKCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7Ci8qKioqKiovIAl9CgoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwoKLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCSJ1c2Ugc3RyaWN0IjsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCglleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCglmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCgkvKioNCgkqIElkZW50aXR5UHJveHkgLS0gTk9ERSBPUEVOSUQgQ09OTkVDVCBTZXJ2ZXINCgkqDQoJKiBJbml0aWFsIHNwZWNpZmljYXRpb246IEQ0LjENCgkqDQoJKiBUaGUgSWRlbnRpdHlNb2R1bGUgaXMgYSBjb21wb25lbnQgbWFuYWdpbmcgdXNlciBJZGVudGl0eS4gSXQgZG93bmxvYWRzLCBpbnN0YW50aWF0ZXMNCgkqIGFuZCBtYW5hZ2UgSWRlbnRpdHkgUHJvdmlkZXIgUHJveHkgKElkUCkgZm9yIGl0cyBvd24gdXNlciBpZGVudGl0eSBvciBmb3IgZXh0ZXJuYWwNCgkqIHVzZXIgaWRlbnRpdHkgdmVyaWZpY2F0aW9uLg0KCSoNCgkqIFRoZSBJZFAgY29udGFpbnMgbWV0aG9kcyBhbmQgcGFyYW1ldGVycyB0byBhY3R1YWxseSBhY2Nlc3MgYW5kIG1ha2UgcmVxdWVzdA0KCSogdG8gdGhlIElkUCBTZXJ2ZXIuIEFsdGVybmF0aXZlbHkgc29tZSBmdW5jdGlvbm5hbGl0aWVzIGNhbiBiZSBkb25lIGxvY2FsbHkuDQoJKg0KCSovCgl2YXIgU0NIRU1FID0gImh0dHBzOi8vIiwKCSAgICBTT1VSQ0VVUkwgPSAiZW5lcmd5cS5pZHAucmV0aGluay5vcmFuZ2UtbGFicy5mciIsCgoJLy9TT1VSQ0VVUkwgPSAnMTkyLjE2OC45OS4xMDA6ODA4MCcsCglBVVRIUEFUSCA9ICIvcHJveHkvYXV0aG9yaXplIiwKCSAgICBWRVJJRllQQVRIID0gIi9wcm94eS92ZXJpZnkiLAoJICAgIERPTkVQQVRIID0gIi9wcm94eS9kb25lIiwKCSAgICBLRVlQQVRIID0gJy9wcm94eS9rZXknLAoJICAgIElEUEFUSCA9ICcvcHJveHkvaWQnLAoJICAgIFBST1hZVFlQRSA9ICdyZXRoaW5rLW9pZGMnLAoJICAgIElEU0NPUEUgPSAnb3BlbmlkJywKCSAgICBGVUxMU0NPUEUgPSAnb3BlbmlkIHdlYnJ0YycsCgkgICAgVFlQRSA9ICdpZF90b2tlbiB0b2tlbic7CgkvL3ZhciBUWVBFICAgICAgID0gICAnY29kZSc7CgoJdmFyIGlkcF9hZGRyID0geyAnZG9tYWluJzogU09VUkNFVVJMLCAncHJvdG9jb2wnOiBQUk9YWVRZUEUgfTsKCglpZiAodHlwZW9mIGNvbnNvbGUgPT0gInVuZGVmaW5lZCIpIHsKCSAgdW5kZWZpbmVkLmNvbnNvbGUgPSB7CgkgICAgbG9nOiBmdW5jdGlvbiBsb2coKSB7fSwKCSAgICB3YXJuOiBmdW5jdGlvbiB3YXJuKCkge30KCSAgfTsKCX0KCgkvL2Z1bmN0aW9uIHRvIHBhcnNlIHRoZSBxdWVyeSBzdHJpbmcgaW4gdGhlIGdpdmVuIFVSTCB0byBvYmF0aW4gY2VydGFpbiB2YWx1ZXMKCWZ1bmN0aW9uIHVybFBhcnNlcih1cmwsIG5hbWUpIHsKCSAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xbXS8sICdcXFxbJykucmVwbGFjZSgvW1xdXS8sICdcXFxdJyk7CgkgIHZhciByZWdleFMgPSAnW1xcIyY/XScgKyBuYW1lICsgJz0oW14mI10qKSc7CgkgIHZhciByZWdleCA9IG5ldyBSZWdFeHAocmVnZXhTKTsKCSAgdmFyIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7CgkgIGlmIChyZXN1bHRzID09PSBudWxsKSByZXR1cm4gJyc7ZWxzZSByZXR1cm4gcmVzdWx0c1sxXTsKCX0KCglmdW5jdGlvbiBnZXRQcm94eUtleSgpIHsKCSAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICB2YXIgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwoJICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PSA0ICYmIHhtbGh0dHAuc3RhdHVzID09IDIwMCkgewoJICAgICAgICB2YXIgcmVzID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7CgkgICAgICAgIHJlcy5lcnJvciAhPSB1bmRlZmluZWQgPyByZWplY3QocmVzLmVycm9yKSA6IHJlc29sdmUocmVzKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIHhtbGh0dHAub3BlbigiR0VUIiwgU0NIRU1FICsgU09VUkNFVVJMICsgS0VZUEFUSCwgdHJ1ZSk7CgkgICAgeG1saHR0cC5zZW5kKCk7CgkgIH0pOwoJfWZ1bmN0aW9uIGdldFByb3h5SUQoKSB7CgkgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCSAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiB4bWxodHRwLnN0YXR1cyA9PSAyMDApIHsKCSAgICAgICAgdmFyIHJlcyA9IEpTT04ucGFyc2UoeG1saHR0cC5yZXNwb25zZVRleHQpOwoJICAgICAgICByZXMuZXJyb3IgIT0gdW5kZWZpbmVkID8gcmVqZWN0KHJlcy5lcnJvcikgOiByZXNvbHZlKHJlcy5rZXkpOwoJICAgICAgfQoJICAgIH07CgkgICAgeG1saHR0cC5vcGVuKCJHRVQiLCBTQ0hFTUUgKyBTT1VSQ0VVUkwgKyBJRFBBVEgsIHRydWUpOwoJICAgIHhtbGh0dHAuc2VuZCgpOwoJICB9KTsKCX0KCWZ1bmN0aW9uIGdldElkQXNzZXJ0aW9uKCkgewoJICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoJICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CgkgICAgeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeG1saHR0cC5zdGF0dXMgPT0gMjAwKSB7CgkgICAgICAgIHZhciByZXMgPSBKU09OLnBhcnNlKHhtbGh0dHAucmVzcG9uc2VUZXh0KTsKCSAgICAgICAgcmVzLmVycm9yICE9IHVuZGVmaW5lZCA/IHJlamVjdChyZXMuZXJyb3IpIDogcmVzb2x2ZShyZXMua2V5KTsKCSAgICAgIH0KCSAgICB9OwoJICAgIHhtbGh0dHAub3BlbigiR0VUIiwgU0NIRU1FICsgU09VUkNFVVJMICsgSURQQVRILCB0cnVlKTsKCSAgICB4bWxodHRwLnNlbmQoKTsKCSAgfSk7Cgl9CglmdW5jdGlvbiBzdHIyYWIoc3RyKSB7CgkgIHZhciBidWYgPSBuZXcgQXJyYXlCdWZmZXIoc3RyLmxlbmd0aCk7CgkgIHZhciBidWZWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTsKCSAgZm9yICh2YXIgaSA9IDAsIHN0ckxlbiA9IHN0ci5sZW5ndGg7IGkgPCBzdHJMZW47IGkrKykgewoJICAgIGJ1ZlZpZXdbaV0gPSBzdHIuY2hhckNvZGVBdChpKTsKCSAgfQoJICByZXR1cm4gYnVmOwoJfQoKCWZ1bmN0aW9uIGFiMnN0cihidWYpIHsKCSAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmKSk7Cgl9CgoJLy8gSURQIFByb3h5IGNvZGUKCXZhciBpZHAgPSB7CgkgIC8qKg0KCSAgKiBHZW5lcmF0aW9uIG9mIGFuIElkQXNzZXJ0aW9uIHRocm91Z2ggT0lEQyBJZFANCgkgICovCgkgIGdlbmVyYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cywgb3JpZ2luLCBoaW50KSB7CgkgICAgaWYgKGhpbnQpIHsKCgkgICAgICB2YXIgaWRUb2tlbiA9IHVybFBhcnNlcihoaW50LCAnaWRfdG9rZW4nKTsKCgkgICAgICB2YXIgaWRwQnVuZGxlID0geyBkb21haW46ICdvcmFuZ2UuZnInLCBwcm90b2NvbDogJ09JREMnIH07CgkgICAgICB2YXIgaWRlbnRpdHlCdW5kbGUgPSB7IGFzc2VydGlvbjogaWRUb2tlbiwgaWRwOiBpZHBCdW5kbGUgfTsKCgkgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGlkZW50aXR5QnVuZGxlKTsKCSAgICB9IGVsc2UgewoJICAgICAgLy9Db21wdXRlIG5vbmNlICsgY29udGVudAoJICAgICAgdmFyIG5vbmNlID0gYnRvYShKU09OLnN0cmluZ2lmeSh7ICdzZHAnOiBjb250ZW50cywgJ24nOiBNYXRoLnJhbmRvbSgpIH0pKTsKCSAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgICAgIHJldHVybiBnZXRQcm94eUlEKCkudGhlbihmdW5jdGlvbiAoSUQpIHsKCSAgICAgICAgICB2YXIgX3VybCA9IFNDSEVNRSArIFNPVVJDRVVSTCArIEFVVEhQQVRIICsgJz9zY29wZT0nICsgSURTQ09QRSArICcmY2xpZW50X2lkPScgKyBJRCArICcmcmVkaXJlY3RfdXJpPScgKyBTQ0hFTUUgKyBTT1VSQ0VVUkwgKyBET05FUEFUSCArICcmcmVzcG9uc2VfdHlwZT0nICsgVFlQRSArICcmbm9uY2U9JyArIG5vbmNlOwoKCSAgICAgICAgICAvL3JlbW92ZWQgV2VicnRjIHNjb3BlIGFuZCBydGNzZHAKCgkgICAgICAgICAgcmVqZWN0KHsgJ25hbWUnOiAnSWRwTG9naW5FcnJvcicsICdsb2dpblVybCc6IF91cmwgfSk7CgkgICAgICAgIH0pOwoJICAgICAgfSk7CgkgICAgfQoJICB9LAoJICAvKioNCgkgICogVmVyaWZpY2F0aW9uIG9mIGEgcmVjZWl2ZWQgSWRBc3NlcnRpb24gdmFsaWRpdHkNCgkgICogQ2FuIGFsc28gYmUgdXNlZCB0byB2YWxpZGF0ZSB0b2tlbiByZWNlaXZlZCBieSBJZFANCgkgICogQHBhcmFtICB7RE9NU3RyaW5nfSBhc3NlcnRpb24gYXNzZXJ0aW9uDQoJICAqLwoJICB2YWxpZGF0ZUFzc2VydGlvbjogZnVuY3Rpb24gdmFsaWRhdGVBc3NlcnRpb24oYXNzZXJ0aW9uIC8qLCBvcmlnaW4gKi8pIHsKCSAgICBhc3NlcnRpb24gPSBhc3NlcnRpb24uc3BsaXQoIi4iKTsKCSAgICB2YXIgaGVhZGVyID0gYXNzZXJ0aW9uWzBdLAoJICAgICAgICBwYXlsb2FkID0gYXNzZXJ0aW9uWzFdLAoJICAgICAgICBzaWduYXR1cmUgPSBhc3NlcnRpb25bMl07CgkgICAgLy9UT0RPIHRoZXJlIGlzIHByb2JhYmx5IGEgYmV0dGVyIHdheSB0byBkbyB0aGF0PwoJICAgIHNpZ25hdHVyZSA9IHNpZ25hdHVyZS5yZXBsYWNlKC9fL2csICIvIikucmVwbGFjZSgvLS9nLCAiKyIpOwoJICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgICByZXR1cm4gZ2V0UHJveHlLZXkoKS50aGVuKGZ1bmN0aW9uIChLZXkpIHsKCSAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdqd2snLCBLZXksIHsgbmFtZTogJ1JTQVNTQS1QS0NTMS12MV81JywgaGFzaDogeyBuYW1lOiAiU0hBLTI1NiIgfSB9LCB0cnVlLCBbJ3ZlcmlmeSddKTsKCSAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKEpXSykgewoJICAgICAgICByZXR1cm4gKAoJICAgICAgICAgIC8vY3J5cHRvLnZlcmlmeShhbGdvLCBrZXksIHNpZ25hdHVyZSwgdGV4dDJ2ZXJpZnkpOwoJICAgICAgICAgIGNyeXB0by5zdWJ0bGUudmVyaWZ5KCdSU0FTU0EtUEtDUzEtdjFfNScsIEpXSywgc3RyMmFiKGF0b2Ioc2lnbmF0dXJlKSksIC8vQXJyYXlCdWZmZXIgb2YgdGhlIHNpZ25hdHVyZSwKCSAgICAgICAgICBzdHIyYWIoaGVhZGVyICsgIi4iICsgcGF5bG9hZCkpCgkgICAgICAgICk7CgkgICAgICB9KSAvL0FycmF5QnVmZmVyIG9mIHRoZSBkYXRhCgkgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CgkgICAgICAgIGlmICghcmVzdWx0KSByZWplY3QoeyAnbmFtZSc6ICdJZHBFcnJvcicsICdtZXNzYWdlJzogJ0ludmFsaWQgc2lnbmF0dXJlIG9uIGlkZW50aXR5IGFzc2VydGlvbicgfSk7ZWxzZSB7CgkgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKGF0b2IocGF5bG9hZCkpOwoJICAgICAgICAgIC8vIGhhY2sgdG8gZ2V0IG9ubHkgdGhlIG5hbWUgYW5kIHJlbW92ZSBhbnkgQG1haWwuY29tCgkgICAgICAgICAgLy8gTW96aWxsYSB3YW50IHVzIHRvIHByb3ZpZGUgYSB1c2VybmFtZSB3aXRoIG5hbWVARE9NQUlOCgkgICAgICAgICAgLy8gd2hlcmUgRE9NQUlOIGlzIElkUCBQcm94eSBET01BSU4KCSAgICAgICAgICB2YXIgbmFtZSA9IGpzb24uc3ViLnNwbGl0KCdAJylbMF07CgkgICAgICAgICAgLy8gRGVjb2RlIG5vbmNlIHRvIGdldCBjb250ZW50cwoJICAgICAgICAgIHZhciBjb250ZW50cyA9IEpTT04ucGFyc2UoYXRvYihqc29uLm5vbmNlKSkuc2RwOwoJICAgICAgICAgIHJlc29sdmUoeyAnaWRlbnRpdHknOiBuYW1lICsgJ0AnICsgaWRwX2FkZHIuZG9tYWluLCAnY29udGVudHMnOiBjb250ZW50cyB9KTsKCSAgICAgICAgfQoJICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CgkgICAgICAgIHJldHVybiByZWplY3QoeyAnbmFtZSc6ICdJZHBFcnJvcicsICdtZXNzYWdlJzogZXJyb3IgfSk7CgkgICAgICB9KTsKCSAgICB9KTsKCSAgfQoJfTsKCglpZiAodHlwZW9mIHJ0Y0lkZW50aXR5UHJvdmlkZXIgIT0gJ3VuZGVmaW5lZCcpIHsKCSAgcnRjSWRlbnRpdHlQcm92aWRlci5yZWdpc3RlcihpZHApOwoJICBjb25zb2xlLmxvZygiUHJveHkgbG9hZGVkIik7Cgl9IGVsc2UgewoJICBjb25zb2xlLndhcm4oJ0lkUCBub3QgcnVubmluZyBpbiB0aGUgcmlnaHQgc2FuZGJveCcpOwoJfQoKCS8qKg0KCSogSWRlbnRpdHkgUHJvdmlkZXIgUHJveHkgUHJvdG9jb2wgU3R1Yg0KCSovCgoJdmFyIFJldGhpbmtPaWRjUHJvdG9TdHViID0gZnVuY3Rpb24gKCkgewoKCSAgLyoqDQoJICAqIENvbnN0cnVjdG9yIG9mIHRoZSBJZHBQcm94eSBTdHViDQoJICAqIFRoZSBjb25zdHJ1Y3RvciBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgbWVzc2FnZUJ1cyByZWNlaXZlZCBhbmQgc3RhcnQgYSB3ZWIgd29ya2VyIHdpdGggdGhlIGlkcFByb3h5IHJlY2VpdmVkDQoJICAqDQoJICAqIEBwYXJhbSAge1VSTC5SdW50aW1lVVJMfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMIHJ1bnRpbWVQcm90b1N1YlVSTA0KCSAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzUG9zdE1lc3NhZ2UgICAgIGNvbmZpZ3VyYXRpb24NCgkgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uDQoJICAqLwoJICBmdW5jdGlvbiBSZXRoaW5rT2lkY1Byb3RvU3R1YihydW50aW1lUHJvdG9TdHViVVJMLCBidXMsIGNvbmZpZykgewoJICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXRoaW5rT2lkY1Byb3RvU3R1Yik7CgoJICAgIHZhciBfdGhpcyA9IHRoaXM7CgkgICAgX3RoaXMucnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CgkgICAgX3RoaXMubWVzc2FnZUJ1cyA9IGJ1czsKCSAgICBfdGhpcy5jb25maWcgPSBjb25maWc7CgoJICAgIF90aGlzLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CgkgICAgICBpZiAobXNnLnRvID09ICdkb21haW4taWRwOi8vb3JhbmdlLmZyJykgewoJICAgICAgICAvKmxldCBuZXdWYWx1ZSA9IElkcFByb3h5LmdlbmVyYXRlQXNzZXJ0aW9uKCk7DQoJICAgICAgICBsZXQgbWVzc2FnZSA9IHtpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogbXNnLmZyb20sIGZyb206IG1zZy50bywNCgkgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHtjb2RlOiAyMDAsIHZhbHVlOiBuZXdWYWx1ZSwgYnVzOiBidXMsIHJ1bnRpbWVQcm90b1N0dWJVUkw6IHJ1bnRpbWVQcm90b1N0dWJVUkx9fTsNCgkgICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtZXNzYWdlKTsqLwoJICAgICAgICBfdGhpcy5yZXF1ZXN0VG9JZHAobXNnKTsKCSAgICAgIH0KCSAgICB9KTsKCSAgICBfdGhpcy5fc2VuZFN0YXR1cygnY3JlYXRlZCcpOwoJICB9CgoJICAvKioNCgkgICogRnVuY3Rpb24gdGhhdCBzZWUgdGhlIGludGVuZGVkIG1ldGhvZCBpbiB0aGUgbWVzc2FnZSByZWNlaXZlZCBhbmQgY2FsbCB0aGUgcmVzcGVjdGl2ZSBmdW5jdGlvbg0KCSAgKg0KCSAgKiBAcGFyYW0ge21lc3NhZ2V9ICBtZXNzYWdlIHJlY2VpdmVkIGluIHRoZSBtZXNzYWdlQnVzDQoJICAqLwoKCgkgIF9jcmVhdGVDbGFzcyhSZXRoaW5rT2lkY1Byb3RvU3R1YiwgW3sKCSAgICBrZXk6ICJyZXF1ZXN0VG9JZHAiLAoJICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0VG9JZHAobXNnKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoJICAgICAgdmFyIHBhcmFtcyA9IG1zZy5ib2R5LnBhcmFtczsKCgkgICAgICBzd2l0Y2ggKG1zZy5ib2R5Lm1ldGhvZCkgewoJICAgICAgICBjYXNlICdnZW5lcmF0ZUFzc2VydGlvbic6CgkgICAgICAgICAgaWRwLmdlbmVyYXRlQXNzZXJ0aW9uKHBhcmFtcy5jb250ZW50cywgcGFyYW1zLm9yaWdpbiwgcGFyYW1zLnVzZXJuYW1lSGludCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKCSAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTsKCSAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKCSAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIGVycm9yKTsKCSAgICAgICAgICB9KTsKCSAgICAgICAgICBicmVhazsKCSAgICAgICAgY2FzZSAndmFsaWRhdGVBc3NlcnRpb24nOgoJICAgICAgICAgIGlkcC52YWxpZGF0ZUFzc2VydGlvbihwYXJhbXMuYXNzZXJ0aW9uLCBwYXJhbXMub3JpZ2luKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewoJICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpOwoJICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewoJICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgZXJyb3IpOwoJICAgICAgICAgIH0pOwoJICAgICAgICAgIGJyZWFrOwoJICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgIGJyZWFrOwoJICAgICAgfQoJICAgIH0KCgkgICAgLyoqDQoJICAgICogVGhpcyBmdW5jdGlvbiByZWNlaXZlcyBhIG1lc3NhZ2UgYW5kIGEgdmFsdWUuIEl0IHJlcGxpZXMgdGhlIHZhbHVlIHRvIHRoZSBzZW5kZXIgb2YgdGhlIG1lc3NhZ2UgcmVjZWl2ZWQNCgkgICAgKg0KCSAgICAqIEBwYXJhbSAge21lc3NhZ2V9ICAgbWVzc2FnZSByZWNlaXZlZA0KCSAgICAqIEBwYXJhbSAge3ZhbHVlfSAgICAgdmFsdWUgdG8gaW5jbHVkZSBpbiB0aGUgbmV3IG1lc3NhZ2UgdG8gc2VuZA0KCSAgICAqLwoKCSAgfSwgewoJICAgIGtleTogInJlcGx5TWVzc2FnZSIsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGx5TWVzc2FnZShtc2csIHZhbHVlKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIHZhciBtZXNzYWdlID0geyBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogbXNnLmZyb20sIGZyb206IG1zZy50bywKCSAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHZhbHVlOiB2YWx1ZSB9IH07CgoJICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtZXNzYWdlKTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICJfc2VuZFN0YXR1cyIsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgY29uc29sZS5sb2coJ1tHb29nbGVJZHBQcm94eS5zZW5kU3RhdHVzXSAnLCB2YWx1ZSk7CgoJICAgICAgX3RoaXMuX3N0YXRlID0gdmFsdWU7CgoJICAgICAgdmFyIG1zZyA9IHsKCSAgICAgICAgdHlwZTogJ3VwZGF0ZScsCgkgICAgICAgIGZyb206IF90aGlzLnJ1bnRpbWVQcm90b1N0dWJVUkwsCgkgICAgICAgIHRvOiBfdGhpcy5ydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLAoJICAgICAgICBib2R5OiB7CgkgICAgICAgICAgdmFsdWU6IHZhbHVlCgkgICAgICAgIH0KCSAgICAgIH07CgoJICAgICAgaWYgKHJlYXNvbikgewoJICAgICAgICBtc2cuYm9keS5kZXNjID0gcmVhc29uOwoJICAgICAgfQoKCSAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKCSAgICB9CgkgIH1dKTsKCgkgIHJldHVybiBSZXRoaW5rT2lkY1Byb3RvU3R1YjsKCX0oKTsKCgkvLyBleHBvcnQgZGVmYXVsdCBJZHBQcm94eVByb3RvU3R1YjsKCgkvKioNCgkgKiBUbyBhY3RpdmF0ZSB0aGlzIHByb3RvY29sIHN0dWIsIHVzaW5nIHRoZSBzYW1lIG1ldGhvZCBmb3IgYWxsIHByb3Rvc3R1Yi4NCgkgKiBAcGFyYW0gIHtVUkwuUnVudGltZVVSTH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCBydW50aW1lUHJvdG9TdWJVUkwNCgkgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzUG9zdE1lc3NhZ2UgICAgIGNvbmZpZ3VyYXRpb24NCgkgKiBAcGFyYW0gIHtQcm90b1N0dWJEZXNjcmlwdG9yLkNvbmZpZ3VyYXRpb25EYXRhTGlzdH0gY29uZmlndXJhdGlvbiAgICAgIGNvbmZpZ3VyYXRpb24NCgkgKiBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCB3aXRoIG5hbWUgYW5kIGluc3RhbmNlIG9mIFByb3RvU3R1Yg0KCSAqLwoKCglmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CgkgIHJldHVybiB7CgkgICAgbmFtZTogJ1JldGhpbmtPaWRjUHJvdG9TdHViJywKCSAgICBpbnN0YW5jZTogbmV3IFJldGhpbmtPaWRjUHJvdG9TdHViKHVybCwgYnVzLCBjb25maWcpCgkgIH07Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbImRlZmF1bHQiXTsKCi8qKiovIH0KLyoqKioqKi8gXSkKfSk7Cjs=",
  "sourceCodeClassname": "orange.com",
      "encoding": "base64",
      "signature": ""
}
